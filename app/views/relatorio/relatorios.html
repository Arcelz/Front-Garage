<!-- Content area -->

<div class="content">

    <!-- 2 columns form -->
        <div class="panel panel-flat">
            <div class="panel-heading">
                <h5 class="panel-title">Gerar Relatorios</h5>

            </div>

            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <fieldset>
                            <legend class="text-semibold"><i class="icon-wrench position-left"></i> Relatorios
                            </legend>
                            <div class="form-group col-md-6">
                                <label class="col-lg-3 control-label">Relatorio
                                    <img src="app/resources/img/asterisk-pr-icon.png" alt="obrigatório" height="10" width="10" />
                                </label>
                                <div class="col-lg-9">
                                        <select ng-change="changeRelatorio()" id="selectRelatorio" data-placeholder="Selecione o grupo"
                                                class="select" ng-required="true"  data-ng-model="form.relatorio_id" ng-options="item.id as item.nome for item in relatoriosResultados" >
                                            <option value=""></option>
                                        </select>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
                <form name="formulario" ng-submit="salvar()" novalidate>
                <div id="add"></div>
                    <div class="text-right">
                        <button ng-disabled="botao" class="btn btn-primary"> Pesquisar <i class="icon-arrow-right14 position-right"></i></button>
                    </div>
                </form>
            </div>
            <div id="gerarPDF">
            <h5 id="nomePDF" class="text-center panel-title">{{nomeTabela}}</h5>
            <div id="tabela"></div>
            </div>
            <div class="text-right">
                <button ng-disabled="botaoPDF"id="pdf" class="btn btn-primary"> PDF <i class="icon-arrow-right14 position-right"></i></button>
            </div>
        </div>
</div>
<!-- /content area -->


<!-- Theme JS files -->
<script type="text/javascript" src="app/assets/js/plugins/forms/selects/select2.min.js"></script>
<script type="text/javascript" src="app/assets/js/pages/form_layouts.js"></script>
<script type="text/javascript" src="app/resources/js/jspdf.js"></script>
<script type="text/javascript" src="app/resources/js/html2canvas.js"></script>


<!-- Função para subir ate o TOPO  -->
<script>
    $(document).ready(function () {
        $('html, body').animate({ scrollTop: 0 }, 'slow');
        return false;
    });
    $('#pdf').click(function () {
        var cache_width = $('#gerarPDF').width(); //Criado um cache do CSS
        var a4  =[ 595.28,  841.89]; // Widht e Height de uma folha a4

            // Setar o width da div no formato a4
            $('#gerarPDF').width((a4[0]*1.33333) -80).css('max-width','none');

            // Aqui ele cria a imagem e cria o pdf
            html2canvas($('#gerarPDF'), {
                onrendered: function(canvas) {
                    var img = canvas.toDataURL("image/png",1.0);
                    var doc = new jsPDF({unit:'px', format:'a4'});
                    doc.addImage(img, 'JPEG', 20, 20);
                    doc.save($('#nomePDF').text()+'.pdf');
                    //Retorna ao CSS normal
                    $('#gerarPDF').width(cache_width);
                }
            });
    });
</script>
<!-- / FIM Função para subir ate o TOPO  -->

<!-- /theme JS files -->

